---
import { Proveedor } from "astro:db";
import { db } from "astro:db";

if (Astro.request.method === "POST") {
  const data: any = await Astro.request.formData();

  const nombre: string = data.get("nombre");
  const direccion: string = data.get("direccion");
  const telefono: string = data.get("telefono");

  await db.insert(Proveedor).values({
    nombre,
    direccion,
    telefono,
  });

  return Astro.redirect("/proveedores");
}
---
